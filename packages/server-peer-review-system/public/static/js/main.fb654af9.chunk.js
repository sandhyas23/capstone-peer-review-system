(window["webpackJsonpclient-peer-review-system"]=window["webpackJsonpclient-peer-review-system"]||[]).push([[0],{279:function(e,t,a){e.exports=a(508)},508:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(48),r=a.n(i),c=(a(284),a(17)),o=a(21),l=a(22),u=a(24),m=a(23),d=a(25),h=a(533),p=a(531),v=a(526),b=a(530),f=a(185),w=a(528),k=a(32),E=a.n(k),g=a(44),y=a(18),T=a.n(y),C=a(27),S=a.n(C),R=(a(70),a(96)),I=a(68),j=a(521),O=a(523),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFile=function(){var e=Object(g.a)(E.a.mark((function e(t){var n,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new FileReader,s=t.target.files[0],0!==t.target.value.length?(n.onloadend=function(){var e=Object(g.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({content:t.target.result,fileName:s.name});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.readAsText(s)):a.setState({content:a.state.content,fileName:a.state.fileName});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={currentTask:a.props.currentTask,submissions:[],netId:a.props.netId,"assignment-name":a.props.currentTask["task-name"],content:"Upload a markdown file to view the submission",theInputKey:"",fileName:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){T.a.highlightAll()}},{key:"componentDidMount",value:function(){var e=this;fetch("/submissions/student/"+this.state.netId,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){var a=t.submissions.find((function(t,a,n){return t["assignment-name"]===e.state.currentTask["task-name"]}));"undefined"!==typeof a?e.setState({submissions:t.submissions,content:a.content,fileName:a.fileName}):e.setState({submissions:t.submissions})})),T.a.highlightAll()}},{key:"handleSubmit",value:function(){var e=this,t=this,a={"assignment-name":this.state["assignment-name"],netId:this.state.netId,content:this.state.content,fileName:this.state.fileName,submittedOn:(new Date).toISOString()},n=this.state.submissions.findIndex((function(t){return t["assignment-name"]===e.state["assignment-name"]&&t.netId===e.state.netId}));n>=0?fetch("/submissions/"+this.state["assignment-name"]+"/student/"+this.state.netId,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){t.state.submissions.splice(n,1,a),t.setState({submissions:t.state.submissions})})):fetch("/submissions/"+this.state["assignment-name"]+"/student/"+this.state.netId,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){t.state.submissions.push(a);var n=Math.random().toString(36);t.setState({submissions:t.state.submissions,theInputKey:n})}))}},{key:"render",value:function(){var e=this;console.log("state",this.state);var t="",a="",n=this.state.submissions.find((function(t,a,n){return t["assignment-name"]===e.state["assignment-name"]&&t.netId===e.state.netId}));"undefined"===typeof n?t="Not Submitted":(t="Submitted",a=new Date(n.submittedOn).toLocaleString());var i=this.state.content,r=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:i}));return s.a.createElement(h.a.Row,null,s.a.createElement(h.a.Column,{computer:14},s.a.createElement(h.a.Row,null,s.a.createElement(b.a,{style:{boxShadow:"none"}},s.a.createElement(R.a,{ribbon:!0,icon:"star",content:"".concat(t," : ").concat(a),color:"blue"}),s.a.createElement("span",null,s.a.createElement(p.a,{textAlign:"center",as:"h4"},s.a.createElement(I.a,{name:"tag"}),this.state.currentTask["task-name"])))),s.a.createElement(h.a.Row,null,s.a.createElement(h.a.Column,null,s.a.createElement(v.a,{centered:"true"},s.a.createElement(b.a,{textAlign:"center"},s.a.createElement(v.a.Group,{centered:"true",widths:"equal"},s.a.createElement(v.a.Field,{inline:!0},s.a.createElement(R.a,{icon:"calendar alternate",content:"Due"}),s.a.createElement(j.a,{readOnly:!0},new Date(this.state.currentTask.due).toLocaleString())),s.a.createElement(v.a.Field,{inline:!0},s.a.createElement(R.a,{icon:"lock open",content:"Status"}),s.a.createElement(j.a,{readOnly:!0,style:{color:"green"}},"Open"))),s.a.createElement(v.a.Group,{centered:"true",widths:"equal"},s.a.createElement(v.a.Field,null,s.a.createElement(R.a,{icon:"file code",content:"Markdown Preview "}),s.a.createElement(R.a,{basic:!0},s.a.createElement(I.a,{name:"file"}),"Filename : ",this.state.fileName),s.a.createElement(b.a,{style:{overflow:"auto",minHeight:330,maxHeight:330,maxWidth:600,minWidth:200}},s.a.createElement(O.a,{readOnly:!0,style:{minHeight:300,minWidth:200},name:"content",value:this.state.content}))),s.a.createElement(v.a.Field,null,s.a.createElement(R.a,{icon:"code",content:"Code Preview"}),s.a.createElement(b.a,{style:{overflow:"auto",minHeight:330,maxHeight:330,maxWidth:600,minWidth:200},textAlign:"left"},r))),s.a.createElement("input",{type:"file",accept:".md",onChange:function(t){return e.handleFile(t)},key:this.state.theInputKey}),s.a.createElement(f.a,{icon:"file",content:"Submit",type:"button",color:"green",onClick:function(){return e.handleSubmit()},disabled:"Upload a markdown file to view the submission"===this.state.content})))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.currentTask===t.currentTask)return null;var a=t.submissions.find((function(t,a,n){return t["assignment-name"]===e.currentTask["task-name"]}));if("undefined"!==typeof a){var n=Math.random().toString(36),s=a.content,i=a.fileName;return{currentTask:e.currentTask,"assignment-name":e.currentTask["task-name"],content:s,fileName:i,theInputKey:n}}var r=Math.random().toString(36);return{currentTask:e.currentTask,"assignment-name":e.currentTask["task-name"],content:"Upload a markdown file to view the submission",fileName:"",theInputKey:r}}}]),t}(s.a.Component),x=a(529),D=a(532),H=a(524),N=a(527),P=a(138),W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(){var e=Object(g.a)(E.a.mark((function e(t,n,s){var i,r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.target,r=i.value,o=i.name,a.setState(Object(c.a)({},o,r));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.state={currentTask:a.props.currentTask,studentsReview:a.props.reviews,netId:a.props.netId,"assignment-name":a.props.currentTask["peer-review-for"],content:"Click a review link to view the submission",totalQuestions:[],reviewTasks:a.props.reviewTasks,studentAssignment:a.props.studentAssignment,submissions:a.props.submissions,totalRubricsToReview:[],rubric:[],rubricName:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/reviews/"+this.state["assignment-name"]+"/reviewer/"+this.state.netId,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){t.reviews.map((function(t,a,n){return e.setState({rubric:t.review.rubric}),[t.review.rubric.map((function(a,n,s){var i;return e.setState((i={},Object(c.a)(i,"pointGiven".concat(t["reviewer-id"]).concat(t["submitter-id"]).concat(a["rubric-name"]),a["points-given"]),Object(c.a)(i,"comment".concat(t["reviewer-id"]).concat(t["submitter-id"]).concat(a["rubric-name"]),a.comments),i))})),e.setState(Object(c.a)({},"submittedOn".concat(t["submitter-id"]).concat(t["reviewer-id"]),t.submittedOn))]}))})),T.a.highlightAll()}},{key:"componentDidUpdate",value:function(e,t){if(t["assignment-name"]!==this.state["assignment-name"]){var a=this;fetch("/reviews/"+this.state["assignment-name"]+"/reviewer/"+this.state.netId,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){e.reviews.map((function(e,t,n){return a.setState({rubric:e.review.rubric}),[e.review.rubric.map((function(t,n,s){var i;return a.setState((i={},Object(c.a)(i,"pointGiven".concat(e["reviewer-id"]).concat(e["submitter-id"]).concat(t["rubric-name"]),t["points-given"]),Object(c.a)(i,"comment".concat(e["reviewer-id"]).concat(e["submitter-id"]).concat(t["rubric-name"]),t.comments),i))})),a.setState(Object(c.a)({},"submittedOn".concat(e["submitter-id"]).concat(e["reviewer-id"]),e.submittedOn))]}))}))}T.a.highlightAll()}},{key:"handleItemClick",value:function(e,t){var a=this,n="",s=this.state.submissions.find((function(e,n,s){return e["assignment-name"]===a.state["assignment-name"]&&e.netId===t}));"undefined"!==typeof s&&(n=s.content);var i=this.state.currentTask.rubric;this.state.totalRubricsToReview.map((function(e,n,s){if(a.state["pointGiven".concat(a.state.netId).concat(t).concat(e["rubric-name"])]&&a.state["comment".concat(a.state.netId).concat(t).concat(e["rubric-name"])]){console.log("inside if....");var i={"rubric-name":e["rubric-name"],"possible-points":e.points,"points-given":a.state["pointGiven".concat(a.state.netId).concat(t).concat(e["rubric-name"])],comments:a.state["comment".concat(a.state.netId).concat(t).concat(e["rubric-name"])]};a.state.rubric.splice(n,1,i),console.log("spliced array",a.state.rubric)}}));this.setState({rubric:this.state.rubric,reviewNo:t,totalRubricsToReview:i,content:n})}},{key:"afterHandleChange",value:function(e,t,a){var n=this;this.handleChange(e,t,a).then((function(){var e={"rubric-name":t["rubric-name"],"possible-points":t.points,"points-given":n.state["pointGiven".concat(n.state.netId).concat(n.state.reviewNo).concat(t["rubric-name"])],comments:n.state["comment".concat(n.state.netId).concat(n.state.reviewNo).concat(t["rubric-name"])]};n.state.rubric.splice(a,1,e),n.setState({rubric:n.state.rubric,rubricName:t["rubric-name"],"possible-points":t.points})}))}},{key:"handleSubmit",value:function(e){for(var t=this,a=0,n=0;n<this.state.rubric.length;n++)a+=parseInt(this.state.rubric[n]["points-given"]);var s=this.state.studentsReview.findIndex((function(e,a,n){return e["assignment-name"]===t.state["assignment-name"]&&e["reviewer-id"]===t.state.netId&&e["submitter-id"]===t.state.reviewNo}));if(-1===s){console.log("inside if");var i={reviewerId:this.state.netId,"submitter-id":this.state.reviewNo,"assignment-name":this.state["assignment-name"],review:{"general-comments":"",rubric:this.state.rubric,"total-points":a}},r=this;fetch("/reviews/"+this.state["assignment-name"]+"/reviewer/"+this.state.netId+"/submitter/"+this.state.reviewNo,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(i)}).then((function(e){r.state.studentsReview.push(i),r.setState(Object(c.a)({studentsReview:r.state.studentsReview},"submittedOn".concat(r.state.reviewNo).concat(r.state.netId),new Date)),alert("submitted review for this submitter"),console.log("submitted",r.state.studentsReview)}))}else{var o={reviewerId:this.state.netId,"submitter-id":this.state.reviewNo,"assignment-name":this.state["assignment-name"],review:{"general-comments":"",rubric:this.state.rubric},"total-points":a},l=this;fetch("/reviews/"+this.state["assignment-name"]+"/reviewer/"+this.state.netId+"/submitter/"+this.state.reviewNo,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(o)}).then((function(e){l.state.studentsReview.splice(s,1,o),l.setState(Object(c.a)({studentsReview:l.state.studentsReview},"submittedOn".concat(l.state.reviewNo).concat(l.state.netId),new Date)),console.log("submitted",l.state.studentsReview),alert("submitted review for this submitter")}))}}},{key:"viewContent",value:function(){var e=this.state.content,t=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:e}));return s.a.createElement(b.a,{style:{overflow:"auto",minHeight:330,maxHeight:330,maxWidth:500,minWidth:200},textAlign:"left"},t)}},{key:"render",value:function(){var e,t=this,a=this.state.studentAssignment.find((function(e,a,n){return e["peer-review-for"]===t.state["assignment-name"]}));if("undefined"===typeof a)return"nothing to display";var n=a.studentsAssignment.find((function(e,a,n){return e.student===t.state.netId}));"undefined"!==typeof n&&(e=n.reviewees.map((function(e,a,n){return s.a.createElement(x.a.Item,{name:"Review".concat(a),active:e===t.state.reviewNo,as:"a",onClick:function(a){return t.handleItemClick(a,e)},key:"Review".concat(e).concat(a)},"Review".concat(a))})));var i=this.state.currentTask.instructions,r=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:i})),c=this.state.currentTask.rubric.map((function(e,t,a){var n=e.criteria,i=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:n}));return s.a.createElement(N.a.Row,{key:"row".concat(e["rubric-name"]).concat(t)},s.a.createElement(N.a.Cell,{key:"points".concat(e["rubric-name"]).concat(t)},e.points),s.a.createElement(N.a.Cell,{key:"rubric".concat(e["rubric-name"]).concat(t)},e["rubric-name"]),s.a.createElement(N.a.Cell,{key:"criteria".concat(e["rubric-name"]).concat(t)},i))})),o=this.state.totalRubricsToReview.map((function(e,a,n){return s.a.createElement(v.a.Group,{key:"rubric".concat(e["rubric-name"]).concat(a)},s.a.createElement(R.a,{tag:!0,content:e["rubric-name"]}),s.a.createElement(R.a,{content:e.points}),s.a.createElement(v.a.Input,{name:"pointGiven".concat(t.state.netId).concat(t.state.reviewNo).concat(e["rubric-name"]),type:"number",label:"Points",placeholder:"Points",width:4,min:"0",max:e.points,required:!0,onChange:function(n){return t.afterHandleChange(n,e,a)},key:"pointGiven".concat(t.state.netId).concat(t.state.reviewNo).concat(e["rubric-name"]),value:t.state["pointGiven".concat(t.state.netId).concat(t.state.reviewNo).concat(e["rubric-name"])]||""}),s.a.createElement(v.a.Input,{name:"comment".concat(t.state.netId).concat(t.state.reviewNo).concat(e["rubric-name"]),required:!0,label:"Comments",placeholder:"comments",width:10,onChange:function(n){return t.afterHandleChange(n,e,a)},key:"comment".concat(t.state.netId).concat(t.state.reviewNo).concat(e["rubric-name"]),value:t.state["comment".concat(t.state.netId).concat(t.state.reviewNo).concat(e["rubric-name"])]||""}))}));return s.a.createElement(h.a,{stackable:!0},s.a.createElement(h.a.Column,null,s.a.createElement(h.a.Row,null,s.a.createElement(b.a,{style:{boxShadow:"none"}},s.a.createElement("span",null,s.a.createElement(p.a,{textAlign:"center",as:"h4"},s.a.createElement(I.a,{name:"tag"}),this.state.currentTask["peer-review-for"])))),s.a.createElement(h.a.Row,null,s.a.createElement(v.a,{centered:"true"},s.a.createElement(b.a,{textAlign:"center"},s.a.createElement(v.a.Group,{centered:"true",widths:"equal"},s.a.createElement(v.a.Field,{inline:!0},s.a.createElement(R.a,{icon:"calendar alternate",content:"Due"}),s.a.createElement(j.a,{readOnly:!0},new Date(this.state.currentTask.due).toLocaleString())),s.a.createElement(v.a.Field,{inline:!0},s.a.createElement(R.a,{icon:"lock open",content:"Status"}),s.a.createElement(j.a,{readOnly:!0,style:{color:"green"}},"Open")))))),s.a.createElement(p.a,{textAlign:"center",as:"h4"},s.a.createElement(I.a,{name:"code"}),"Submit Review"),s.a.createElement("span",null," ",s.a.createElement(P.a,{trigger:s.a.createElement(f.a,null,"View Rubrics")},s.a.createElement(P.a.Header,null,"Rubrics"),s.a.createElement(P.a.Content,{scrolling:!0},s.a.createElement(P.a.Description,null,s.a.createElement(p.a,null,"Rubrics for ",this.state.currentTask["peer-review-for"]),s.a.createElement("div",null,"General Instructions: ",r),s.a.createElement(N.a,null,s.a.createElement(N.a.Header,null,s.a.createElement(N.a.Row,null,s.a.createElement(N.a.HeaderCell,null," Possible points"),s.a.createElement(N.a.HeaderCell,null," Rubric name"),s.a.createElement(N.a.HeaderCell,null," Criteria"))),s.a.createElement(N.a.Body,null,c)))))),s.a.createElement(h.a.Row,{columns:2},s.a.createElement(h.a,{celled:!0},s.a.createElement(h.a.Column,{width:8},s.a.createElement(x.a,{pointing:!0,secondary:!0},e),this.viewContent()),s.a.createElement(h.a.Column,{width:8},s.a.createElement(p.a,{textAlign:"center",as:"h4"},s.a.createElement(I.a,{name:"code"}),"Enter points here"),s.a.createElement("hr",null),s.a.createElement(b.a,{style:{overflow:"auto",minHeight:330,maxHeight:330,maxWidth:500,minWidth:200},textAlign:"left"},s.a.createElement(v.a,null,o,this.state.reviewNo?s.a.createElement(f.a,{icon:"file",content:"Submit",type:"button",color:"green",onClick:function(e){return t.handleSubmit(e)},disabled:!this.state["pointGiven".concat(this.state.netId).concat(this.state.reviewNo).concat(this.state.rubricName)]||!this.state["comment".concat(this.state.netId).concat(this.state.reviewNo).concat(this.state.rubricName)]}):s.a.createElement("div",null,"Click on a review id to submit reviews")),"\xa0",this.state.reviewNo?this.state["submittedOn".concat(this.state.reviewNo).concat(this.state.netId)]?s.a.createElement("div",null,s.a.createElement(R.a,{ribbon:!0,icon:"star",content:"Submitted :\n                             ".concat(new Date(this.state["submittedOn".concat(this.state.reviewNo).concat(this.state.netId)]).toLocaleString()),color:"blue"})):s.a.createElement("div",null,s.a.createElement(R.a,{ribbon:!0,icon:"star",content:"Submitted : Not submitted",color:"blue"})):s.a.createElement("div",null)))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.currentTask===t.currentTask?null:{currentTask:e.currentTask,"assignment-name":e.currentTask["peer-review-for"],content:"Click a review link to view the submission",reviewTasks:e.reviewTasks,studentAssignment:e.studentAssignment,submissions:e.submissions}}}]),t}(s.a.Component),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentTask:a.props.currentTask,submissions:e.submissions,netId:a.props.netId,"assignment-name":a.props.currentTask["task-name"]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){T.a.highlightAll()}},{key:"componentDidMount",value:function(){T.a.highlightAll()}},{key:"render",value:function(){var e=this,t="",a="",n=this.state.submissions.find((function(t,a,n){return t.netId===e.state.netId&&t["assignment-name"]===e.state["assignment-name"]}));"undefined"!==typeof n&&(t=n.content,a=n.fileName);var i="",r="",c=this.state.submissions.find((function(t,a,n){return t["assignment-name"]===e.state["assignment-name"]&&t.netId===e.state.netId}));"undefined"===typeof c?i="Not Submitted":(i="Submitted",r=new Date(c.submittedOn).toLocaleString());var o=t,l=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:o}));return s.a.createElement(h.a.Row,null,s.a.createElement(h.a.Column,{computer:14},s.a.createElement(h.a.Row,null,s.a.createElement(b.a,{style:{boxShadow:"none"}},s.a.createElement(R.a,{ribbon:!0,icon:"star",content:"".concat(i," : ").concat(r),color:"blue"}),s.a.createElement("span",null,s.a.createElement(p.a,{textAlign:"center",as:"h4"},s.a.createElement(I.a,{name:"tag"}),this.state.currentTask["task-name"])))),s.a.createElement(h.a.Row,null,s.a.createElement(h.a.Column,null,s.a.createElement(v.a,{centered:"true"},s.a.createElement(b.a,{textAlign:"center"},s.a.createElement(v.a.Group,{centered:"true",widths:"equal"},s.a.createElement(v.a.Field,{inline:!0},s.a.createElement(R.a,{icon:"calendar alternate",content:"Due"}),s.a.createElement(j.a,{readOnly:!0},new Date(this.state.currentTask.due).toLocaleString())),s.a.createElement(v.a.Field,{inline:!0},s.a.createElement(R.a,{icon:"lock open",content:"Status"}),s.a.createElement(j.a,{readOnly:!0,style:{color:"red"}},"Closed"))),s.a.createElement(v.a.Group,{centered:"true",widths:"equal"},s.a.createElement(v.a.Field,null,s.a.createElement(R.a,{icon:"file code",content:"Markdown Preview "}),s.a.createElement(R.a,{basic:!0},s.a.createElement(I.a,{name:"file"}),"Filename : ",a),s.a.createElement(b.a,{style:{overflow:"auto",minHeight:330,maxHeight:330,maxWidth:600,minWidth:200}},s.a.createElement(O.a,{readOnly:!0,style:{minHeight:300,minWidth:200},name:"content",value:t}))),s.a.createElement(v.a.Field,null,s.a.createElement(R.a,{icon:"code",content:"Code Preview"}),s.a.createElement(b.a,{style:{overflow:"auto",minHeight:330,maxHeight:330,maxWidth:600,minWidth:200},textAlign:"left"},l)))))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.currentTask===t.currentTask?null:{currentTask:e.currentTask,submissions:e.submissions,"assignment-name":e.currentTask["task-name"]}}}]),t}(s.a.Component),F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentTask:a.props.currentTask,reviews:a.props.reviews,netId:a.props.netId,"assignment-name":a.props.currentTask["peer-review-for"],content:"",theInputKey:"",fileName:"",rubric:[],submissions:e.submissions},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){T.a.highlightAll()}},{key:"componentDidMount",value:function(){T.a.highlightAll()}},{key:"handleItemClick",value:function(e,t){this.setState({rubric:t.review.rubric,"reviewer-id":t})}},{key:"render",value:function(){var e,t=this,a=this.state.submissions.find((function(e,a,n){return e.netId===t.state.netId&&e["assignment-name"]===t.state["assignment-name"]})),n="";"undefined"!==typeof a&&(n=a.content),console.log("content in state",this.state),e=this.state.reviews.filter((function(e,a,n){return e["assignment-name"]===t.state["assignment-name"]&&e["submitter-id"]===t.state.netId})).map((function(e,a,n){return s.a.createElement(x.a.Item,{name:"Review".concat(a),as:"a",onClick:function(a){return t.handleItemClick(a,e)},key:"Review".concat(e).concat(a),active:e===t.state["reviewer-id"]},"Review".concat(a))}));var i=n,r=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:i})),c=this.state.rubric.map((function(e,t,a){var n=e.comments,i=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:n}));return s.a.createElement(N.a.Row,{key:"roww".concat(t).concat(e["rubric-name"])},s.a.createElement(N.a.Cell,{key:"rubric".concat(t).concat(e["rubric-name"])},e["rubric-name"]),s.a.createElement(N.a.Cell,{key:"possiblepts".concat(t).concat(e["rubric-name"])},e["possible-points"]),s.a.createElement(N.a.Cell,{key:"pointsGiven".concat(t).concat(e["rubric-name"])},e["points-given"]),s.a.createElement(N.a.Cell,{key:"comment".concat(t).concat(e["rubric-name"])},i))})),o=this.state.currentTask.instructions,l=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:o})),u=this.state.currentTask.rubric.map((function(e,t,a){var n=e.criteria,i=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:n}));return s.a.createElement(N.a.Row,{key:"row".concat(e["rubric-name"]).concat(t)},s.a.createElement(N.a.Cell,{key:"points".concat(e["rubric-name"]).concat(t)},e.points),s.a.createElement(N.a.Cell,{key:"rubric".concat(e["rubric-name"]).concat(t)},e["rubric-name"]),s.a.createElement(N.a.Cell,{key:"criteria".concat(e["rubric-name"]).concat(t)},i))}));return s.a.createElement(h.a,{stackable:!0},s.a.createElement(h.a.Column,null,s.a.createElement(h.a.Row,null,s.a.createElement(b.a,{style:{boxShadow:"none"}},s.a.createElement("span",null,s.a.createElement(p.a,{textAlign:"center",as:"h4"},s.a.createElement(I.a,{name:"tag"}),this.state.currentTask["peer-review-for"])))),s.a.createElement(h.a.Row,null,s.a.createElement(v.a,{centered:"true"},s.a.createElement(b.a,{textAlign:"center"},s.a.createElement(v.a.Group,{centered:"true",widths:"equal"},s.a.createElement(v.a.Field,{inline:!0},s.a.createElement(R.a,{icon:"calendar alternate",content:"Due"}),s.a.createElement(j.a,{readOnly:!0},new Date(this.state.currentTask.due).toLocaleString())),s.a.createElement(v.a.Field,{inline:!0},s.a.createElement(R.a,{icon:"lock open",content:"Status"}),s.a.createElement(j.a,{readOnly:!0,style:{color:"red"}},"Closed")))))),s.a.createElement(p.a,{textAlign:"center",as:"h4"},s.a.createElement(I.a,{name:"code"}),"View Reviews for my assignments"),s.a.createElement("span",null," ",s.a.createElement(P.a,{className:"modal1",trigger:s.a.createElement(f.a,null,"View Rubrics")},s.a.createElement(P.a.Header,null,"Rubrics"),s.a.createElement(P.a.Content,{scrolling:!0},s.a.createElement(P.a.Description,null,s.a.createElement(p.a,null,"Rubrics for ",this.state.currentTask["peer-review-for"]),s.a.createElement("div",null,"General Instructions: ",l),s.a.createElement(N.a,null,s.a.createElement(N.a.Header,null,s.a.createElement(N.a.Row,null,s.a.createElement(N.a.HeaderCell,null," Possible points"),s.a.createElement(N.a.HeaderCell,null," Rubric name"),s.a.createElement(N.a.HeaderCell,null," Criteria"))),s.a.createElement(N.a.Body,null,u)))))),s.a.createElement(h.a.Row,{columns:2},s.a.createElement(h.a,{celled:!0},s.a.createElement(h.a.Column,{width:8},s.a.createElement(x.a,{pointing:!0,secondary:!0},e),s.a.createElement("hr",null),s.a.createElement(N.a,null,s.a.createElement(N.a.Header,null,s.a.createElement(N.a.Row,null,s.a.createElement(N.a.HeaderCell,null,"Rubric name"),s.a.createElement(N.a.HeaderCell,null,"Possible pts"),s.a.createElement(N.a.HeaderCell,null,"Points given"),s.a.createElement(N.a.HeaderCell,null,"Comments"))),s.a.createElement(N.a.Body,null,c))),s.a.createElement(h.a.Column,{width:8},s.a.createElement(b.a,{style:{overflow:"auto",minHeight:330,maxHeight:330,maxWidth:500,minWidth:200},textAlign:"left"},r))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.currentTask===t.currentTask?null:{currentTask:e.currentTask,reviews:e.reviews,"assignment-name":e.currentTask["peer-review-for"],rubric:[],submissions:e.submissions,content:""}}}]),t}(s.a.Component),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={submissionTasks:[],reviewTasks:[],mode:"",submissions:[],studentAssignment:[],reviews:[],firstName:e.firstName,lastName:e.lastName},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/submissionTask",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got"+t.submissionTasks),e.setState({submissionTasks:t.submissionTasks})})),fetch("/reviewTask",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got"+t.reviewTasks),e.setState({reviewTasks:t.reviewTasks})})),fetch("/submissions/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got in task submit"+t.submissions),e.setState({submissions:t.submissions})})),fetch("/reviews/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got in task submit"+t.reviews),e.setState({reviews:t.reviews})})),fetch("/studentAssignment/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got in task submit"+t.studentAssignment),e.setState({studentAssignment:t.studentAssignment})})),T.a.highlightAll()}},{key:"handleOpenSubmissionItemClick",value:function(e,t){this.setState({mode:"submit",currentTask:t})}},{key:"handleClosedSubmissionItemClick",value:function(e,t){this.setState({mode:"submitted",currentTask:t})}},{key:"handleOpenReviewItemClick",value:function(e,t){this.setState({mode:"review",currentTask:t})}},{key:"handleClosedReviewItemClick",value:function(e,t){this.setState({mode:"reviewed",currentTask:t})}},{key:"handleViewComponent",value:function(){var e=this,t=this.state.mode;if("submit"===t)return s.a.createElement(A,{currentTask:this.state.currentTask,netId:this.props.netId});if("review"===t)return s.a.createElement(W,{currentTask:this.state.currentTask,netId:this.props.netId,reviewTask:this.state.reviewTasks,studentAssignment:this.state.studentAssignment,submissions:this.state.submissions,reviews:this.state.reviews});if("submitted"===t)return s.a.createElement(G,{currentTask:this.state.currentTask,netId:this.props.netId,reviewTask:this.state.reviewTasks,studentAssignment:this.state.studentAssignment,submissions:this.state.submissions,reviews:this.state.reviews});if("reviewed"===t)return s.a.createElement(F,{currentTask:this.state.currentTask,netId:this.props.netId,reviewTask:this.state.reviewTasks,studentAssignment:this.state.studentAssignment,submissions:this.state.submissions,reviews:this.state.reviews});var a=this.state.submissionTasks.map((function(t,a,n){var i=new Date(t.due).getTime();if((new Date).getTime()-i<0)return s.a.createElement(x.a.Item,{name:t["task-name"],key:"osstask".concat(a),onClick:function(a){return e.handleOpenSubmissionItemClick(a,t)},active:t===e.state.currentTask},s.a.createElement("span",null,s.a.createElement(I.a,{name:"tag"}),t["task-name"]))})),n=this.state.reviewTasks.map((function(t,a,n){var i=new Date(t.due).getTime();if((new Date).getTime()-i<0)return s.a.createElement(x.a.Item,{name:t["peer-review-for"],key:"ortask".concat(a),onClick:function(a){return e.handleOpenReviewItemClick(a,t)},active:t===e.state.currentTask},s.a.createElement("span",null,s.a.createElement(I.a,{name:"tag"}),t["peer-review-for"]))}));return s.a.createElement("div",null,s.a.createElement(b.a,{placeholder:!0,style:{overflow:"auto",minHeight:230,maxHeight:330,maxWidth:1e3,minWidth:200}},s.a.createElement(p.a,{icon:!0},s.a.createElement(I.a,{name:"tag"}),"You have the following assignments to submit"),s.a.createElement(x.a,null,a)),s.a.createElement(b.a,{placeholder:!0,style:{overflow:"auto",minHeight:230,maxHeight:330,maxWidth:1e3,minWidth:200}},s.a.createElement(p.a,{icon:!0},s.a.createElement(I.a,{name:"tag"}),"You have the following reviews to submit"),s.a.createElement(x.a,null,n)))}},{key:"render",value:function(){var e=this,t=this.state.submissionTasks.map((function(t,a,n){var i=new Date(t.due).getTime();if((new Date).getTime()-i<0)return s.a.createElement(x.a.Item,{name:t["task-name"],key:"ostask".concat(a),onClick:function(a){return e.handleOpenSubmissionItemClick(a,t)},active:t===e.state.currentTask},s.a.createElement("span",null,s.a.createElement(I.a,{name:"tag"}),t["task-name"]))})),a=this.state.submissionTasks.map((function(t,a,n){var i=new Date(t.due).getTime();if((new Date).getTime()-i>=0)return s.a.createElement(x.a.Item,{name:t["task-name"],key:"cstask".concat(a),onClick:function(a){return e.handleClosedSubmissionItemClick(a,t)},active:t===e.state.currentTask},s.a.createElement("span",null,s.a.createElement(I.a,{name:"tag"}),t["task-name"]))})),n=this.state.reviewTasks.map((function(t,a,n){var i=new Date(t.due).getTime();if((new Date).getTime()-i<0)return s.a.createElement(x.a.Item,{name:t["peer-review-for"],key:"ortask".concat(a),onClick:function(a){return e.handleOpenReviewItemClick(a,t)},active:t===e.state.currentTask},s.a.createElement("span",null,s.a.createElement(I.a,{name:"tag"}),t["peer-review-for"]))})),i=this.state.reviewTasks.map((function(t,a,n){var i=new Date(t.due).getTime();if((new Date).getTime()-i>=0)return s.a.createElement(x.a.Item,{name:t["peer-review-for"],key:"crtask".concat(a),onClick:function(a){return e.handleClosedReviewItemClick(a,t)},active:t===e.state.currentTask},s.a.createElement("span",null,s.a.createElement(I.a,{name:"tag"}),t["peer-review-for"]))}));return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(D.a,{as:x.a,animation:"push",direction:"left",icon:"labeled",inverted:!0,visible:!0,vertical:!0,width:"thin"},s.a.createElement(x.a.Item,null,s.a.createElement(I.a,{name:"tasks"}),s.a.createElement(x.a.Header,null,"Tasks to submit"),s.a.createElement(x.a.Menu,null,t)),s.a.createElement(x.a.Item,null,s.a.createElement(I.a,{name:"tasks"}),s.a.createElement(x.a.Header,null,"Tasks to Review"),s.a.createElement(x.a.Menu,null,n)),s.a.createElement(x.a.Item,null,s.a.createElement(I.a,{name:"tasks"}),s.a.createElement(x.a.Header,null,"my Submissions"),s.a.createElement(x.a.Menu,null,a)),s.a.createElement(x.a.Item,null,s.a.createElement(I.a,{name:"tasks"}),s.a.createElement(x.a.Header,null,"View reviews for my assignments"),s.a.createElement(x.a.Menu,null,i)))),s.a.createElement(x.a,{fixed:"top",stackable:!0,inverted:!0},s.a.createElement(H.a,null,s.a.createElement(x.a.Item,{as:"h4",header:!0,position:"right",onClick:function(){return e.setState({mode:"",currentTask:""})}},"Peer Review System"),s.a.createElement(x.a.Item,{as:"a",position:"right"},"Welcome, ".concat(this.props.netId," ").concat(this.props.firstName).concat(this.props.lastName)),s.a.createElement(x.a.Item,{as:"a",position:"right","margin-right":"150px",onClick:this.props.onlogoutClick},"Logout"))),s.a.createElement("div",{style:{marginLeft:170,minWidth:550,marginTop:50}},s.a.createElement(h.a,{padded:!0,stackable:!0},s.a.createElement(h.a.Column,null,this.handleViewComponent()))))}}]),t}(s.a.Component),L=a(97),M=a(58),U=a(522),J=a(66),V=a.n(J),z=(a(170),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={createdTask:e.createdTask,type:e.type,studentAssignment:e.studentAssignment},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if("submission"===this.state.type)return console.log(this.state.createdTask),s.a.createElement("div",{style:{marginLeft:170,minWidth:550,marginTop:50}},s.a.createElement(h.a,{padded:!0,stackable:!0},s.a.createElement(v.a,null,s.a.createElement(v.a.Field,{inline:!0},s.a.createElement(v.a.Input,{fluid:!0,label:"Task Name",content:this.state.createdTask["task-name"],readOnly:!0})))))}}]),t}(s.a.Component)),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChanges=function(){var e=Object(g.a)(E.a.mark((function e(t){var n,s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,s=n.value,i=n.name,a.setState(Object(c.a)({},i,s));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.assignTask=function(){var e=Object(g.a)(E.a.mark((function e(t,n){var s,i,r,c,o,l,u,m,d,h,p,v,b,f,w,k,g,y,T,C,S,R,I,j,O,A,x;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(x=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*t),n=e[t];e[t]=e[a],e[a]=n}},C=function(e,t){return e.student>t.student?1:-1},console.log("called first"),s=a.state.submissions.filter((function(e,t,n){return e["assignment-name"]===a.state.selectedReview})),console.log(s),i=n,r=s.length,c=[],o=0;o<r;o++)c[o]=o;for(x(c),l=[],u=0;u<r;u++)m=s[c[u]].netId,d={student:m,reviewers:new Set},l.push(d);for(h=[],p=0;p<r;p++)v=s[c[p]].netId,b={student:v,reviewees:new Set},h.push(b);console.log("Starting Algorithm"),f=0;case 16:if(!(f<r)){e.next=33;break}w=l[f],k=1;case 19:if(!(w.reviewers.size<i)){e.next=30;break}if(!(h[g=(f+k)%r].reviewees.size>=i)){e.next=23;break}return e.abrupt("continue",19);case 23:y=s[c[g]].netId,w.reviewers.add(y),T=s[c[f]].netId,h[g].reviewees.add(T),k++,e.next=19;break;case 30:f++,e.next=16;break;case 33:for(l.sort(C),h.sort(C),S=[],R=0;R<r;R++)console.log(l[R]),I=Array.from(l[R].reviewers),j=Array.from(h[R].reviewees),S.push({student:l[R].student,reviewers:I,reviewees:j}),console.log("newAssignments",S);O={"peer-review-for":a.state.selectedReview,studentsAssignment:S},console.log("assignment",O),A=Object(M.a)(a),fetch("/studentAssignment/"+a.state.selectedReview,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(O)}).then((function(e){A.setState({newAssignments:S,reviews:h})}));case 41:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.state={submissionTasks:a.props.submissionTasks,reviewTasks:a.props.reviewTasks,selectedType:"submission",instructions:"",selectedReview:"",dueDate:new Date,rubricIds:[1],rubric:[],submissions:a.props.submissions,newAssignments:[],reviews:[],num:0,studentAssignment:[],isSubmitted:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){T.a.highlightAll()}},{key:"componentDidMount",value:function(){T.a.highlightAll()}},{key:"handleChange",value:function(e,t){this.setState(Object(c.a)({},t.name,t.value))}},{key:"handleRubricChange",value:function(e,t,a){var n=this;this.handleChanges(e).then((function(){var e={"rubric-name":n.state["rubric".concat(t)],points:n.state["point".concat(t)],criteria:n.state["criteria".concat(t)]};n.state.rubric.splice(a,1,e),n.setState({rubric:n.state.rubric})}))}},{key:"handleSubmit",value:function(e,t){var a=this,n=this;if("submission"===this.state.selectedType){var s={type:this.state.selectedType,"task-name":this.state.selectedReview,due:this.state.dueDate.toISOString()};"undefined"===typeof this.state.submissionTasks.find((function(e,t,n){return e["task-name"]===a.state.selectedReview}))?(console.log("inside if"),fetch("/submissionTask",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(s)}).then((function(e){n.state.submissionTasks.push(s),n.setState({selectedType:"submission",instructions:"",selectedReview:"",dueDate:new Date,submissionTasks:n.state.submissionTasks,currentTask:s}),n.props.update(),alert("submission task created successfully"),console.log("submitted",n.state.submissionTasks)}))):(alert("Submission task already exists"),this.setState({selectedReview:""}))}else this.assignTask(e,t).then((function(){var e={"peer-review-for":a.state.selectedReview,due:a.state.dueDate.toISOString(),rubric:a.state.rubric,instructions:a.state.instructions};console.log(a.state.newAssignments);var t={"peer-review-for":a.state.selectedReview,studentsAssignment:a.state.newAssignments};fetch("/reviewTask",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(a){n.state.reviewTasks.push(e),n.state.studentAssignment.push(t),n.setState({selectedType:"review",instructions:"",dueDate:new Date,num:0,reviewTasks:n.state.reviewTasks,studentAssignment:n.state.studentAssignment,currentTask:e}),n.props.update(),alert("review task created successfully"),console.log("review task",n.state.reviewTasks)}))}))}},{key:"addRubrics",value:function(e){var t=this.state.rubricIds[this.state.rubricIds.length-1];this.setState({rubricCount:this.state.rubricIds.push(t+1)})}},{key:"deleteRubrics",value:function(e,t,a){console.log(t),this.state.rubric.splice(a,1);var n,s=this.state.rubricIds.indexOf(t);(this.state.rubricIds.splice(s,1),s>-1)&&this.setState((n={},Object(c.a)(n,"point".concat(t),void 0),Object(c.a)(n,"rubric".concat(t),void 0),Object(c.a)(n,"criteria".concat(t),void 0),Object(c.a)(n,"rubric",this.state.rubric),Object(c.a)(n,"rubricIds",this.state.rubricIds),n))}},{key:"displayRubrics",value:function(){var e=this;return this.state.rubricIds.map((function(t,a,n){return console.log("displayed for loop",a+1,"times"),s.a.createElement(v.a.Group,{key:"group".concat(a)},s.a.createElement(R.a,{content:"Rubric"}),s.a.createElement(v.a.Input,{name:"point".concat(t),type:"number",label:"Points",placeholder:"Points",width:6,onChange:function(n){return e.handleRubricChange(n,t,a)},key:"point".concat(t),required:!0,min:"1",value:e.state["point".concat(t)]||""}),s.a.createElement(v.a.Input,{name:"rubric".concat(t),label:"rubric-name",placeholder:"rubric-name",required:!0,width:8,key:"rubric".concat(t),onChange:function(n){return e.handleRubricChange(n,t,a)},value:e.state["rubric".concat(t)]||""}),s.a.createElement(v.a.TextArea,{name:"criteria".concat(t),label:"criteria",placeholder:"criteria",width:12,required:!0,key:"criteria".concat(t),onChange:function(n){return e.handleRubricChange(n,t,a)},value:e.state["criteria".concat(t)]||""}),s.a.createElement(f.a,{basic:!0,icon:!0,size:"mini",circular:!0,onClick:function(t){return e.addRubrics(t)},disabled:!e.state["point".concat(t)]||!e.state["rubric".concat(t)]||!e.state["criteria".concat(t)]},s.a.createElement(I.a,{name:"add"})),s.a.createElement(f.a,{basic:!0,icon:!0,size:"mini",circular:!0,onClick:function(n){return e.deleteRubrics(n,t,a)},disabled:1===e.state.rubricIds.length},s.a.createElement(I.a,{name:"delete"})))}))}},{key:"display",value:function(){if(this.state.newAssignments.length>0)return this.displayAssignments()}},{key:"displayAssignments",value:function(){var e=this.state.newAssignments.map((function(e,t,a){return s.a.createElement(N.a.Row,{key:"row".concat(t)},s.a.createElement(N.a.Cell,{key:"cell".concat(t)},s.a.createElement(j.a,{transparent:!0,key:"AssignmentValue".concat(t),name:"AssignmentValue".concat(t)},e.student)),function(e){return e.reviewers.map((function(e,t,a){return s.a.createElement(N.a.Cell,{key:"cell2".concat(t)},e)}))}(e))}));return s.a.createElement(P.a,{trigger:s.a.createElement(f.a,null,"View assignments")},s.a.createElement(P.a.Header,null,"Rubrics"),s.a.createElement(P.a.Content,{scrolling:!0},s.a.createElement(P.a.Description,null,s.a.createElement(p.a,null,"Modal Header"),s.a.createElement(N.a,{celled:!0},s.a.createElement(N.a.Header,null,s.a.createElement(N.a.Row,null,s.a.createElement(N.a.HeaderCell,null,"Submitter Id"),s.a.createElement(N.a.HeaderCell,{colSpan:this.state.num},"Reviewed by"))),s.a.createElement(N.a.Body,null,e)))))}},{key:"render",value:function(){var e=this,t=[],a=this.state.submissionTasks.filter((function(e){var t=new Date(e.due).getTime();if((new Date).getTime()-t>=0)return e}));if(a.length>0){for(var n=a.length,i=0;i<this.state.reviewTasks.length;i++)for(var r=0;r<n;r++)a[r]["task-name"]===this.state.reviewTasks[i]["peer-review-for"]&&(a.splice(r,1),n=a.length);a.map((function(e,a,n){t.push({key:"hw".concat(a).concat(e["task-name"]),text:e["task-name"],value:e["task-name"]})}))}var c=this.state.submissions.filter((function(t,a,n){return t["assignment-name"]===e.state.selectedReview})),o=this.state.selectedType;return!0===this.state.isSubmitted?s.a.createElement(z,{createdTask:this.state.currentTask,type:this.state.selectedType,studentAssignment:this.state.studentAssignment}):s.a.createElement("div",null,s.a.createElement("div",{style:{marginLeft:10,marginRight:10,minWidth:550,marginTop:50}},s.a.createElement(h.a,{stackable:!0},s.a.createElement(h.a.Column,null,s.a.createElement(h.a.Row,null,s.a.createElement(b.a,{style:{boxShadow:"none"},textAlign:"center"},s.a.createElement(p.a,{textAlign:"center",as:"h4"},s.a.createElement(I.a,{name:"tag"}),"Create Task"))),s.a.createElement(h.a.Row,{textAlign:"center"},s.a.createElement(b.a,{align:"center"},s.a.createElement(v.a,{align:"center"},s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement("label",null,"Task Type"),s.a.createElement(U.a,{placeholder:"task type",value:this.state.selectedType,name:"selectedType",options:[{key:"submission",text:"Submission",value:"submission"},{key:"review",text:"Review",value:"review"}],onChange:function(t,a){return e.handleChange(t,a)}})),"review"===o?s.a.createElement("div",null,s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement("label",null,"Task name"),s.a.createElement(U.a,{placeholder:"Select the task name",name:"selectedReview",value:this.state.selectedReview,options:t,onChange:function(t,a){return e.handleChange(t,a)}})),s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement("label",null,"Due"),s.a.createElement(V.a,{selected:this.state.dueDate,onChange:function(t){return e.setState({dueDate:t})},showTimeSelect:!0,timeFormat:"p",timeIntervals:15,dateFormat:"Pp"})),s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement("label",null,"General Instructions"),s.a.createElement(O.a,{style:{minHeight:100,minWidth:200,maxHeight:100,maxWidth:300},placeholder:"markdown instructions",name:"instructions",value:this.state.instructions,onChange:function(t){e.handleChanges(t)}})),s.a.createElement(h.a,{textAlign:"center"},s.a.createElement(h.a.Column,{width:10},this.displayRubrics())),s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement("label",null,"Enter number of reviews"),s.a.createElement(j.a,{name:"num",type:"number",label:"num",placeholder:"num",width:4,onChange:function(t){return e.handleChanges(t)},min:0,max:c.length,value:this.state.num})),this.display(),s.a.createElement("span",null,s.a.createElement(f.a,{type:"submit",onClick:function(t){return e.handleSubmit(t,e.state.num)},disabled:!this.state.selectedReview||!this.state.instructions||!this.state.rubric},"Submit"))):s.a.createElement("div",null,s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement("label",null,"Task name"),s.a.createElement(j.a,{placeholder:"Eg: HW3",name:"selectedReview",value:this.state.selectedReview,onChange:function(t){return e.handleChanges(t)}})),s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement("label",null,"Due"),s.a.createElement(V.a,{selected:this.state.dueDate,onChange:function(t){return e.setState({dueDate:t})},showTimeSelect:!0,timeFormat:"p",timeIntervals:15,dateFormat:"Pp"})),s.a.createElement("span",null,s.a.createElement(f.a,{type:"submit",onClick:function(t){return e.handleSubmit(t)},disabled:!this.state.selectedReview},"Submit"))))))))))}}]),t}(s.a.Component),K=a(525),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleCancel=function(){a.setState({open:!1})},a.handleConfirm=function(){var e=a.state.submissionTasks.findIndex((function(e,t,n){return e["task-name"]===a.state["task-name"]})),t=Object(M.a)(a);fetch("/submissionTask/"+a.state.currentSTask["task-name"],{method:"DELETE",headers:{"Content-type":"application/json"}}).then((function(e){t.setState({open:!1}),t.props.update()})).then((function(){console.log("deleteeeeee",a.state.currentSTask["task-name"]),fetch("/submissions/"+a.state.currentSTask["task-name"],{method:"DELETE",headers:{"Content-type":"application/json"}}).then((function(a){alert("Task has been deleted"),t.state.submissionTasks.splice(e,1),t.state.specificSubmissions=[],t.setState({isDeleted:!0,submissionTasks:t.state.submissionTasks,specificSubmissions:t.state.specificSubmissions}),t.props.viewHome()}))}))},a.state={specificSubmissions:e.specificSubmissions,currentSTask:e.currentSTask,content:"Click on a student ID to view their submission","task-name":e.currentSTask["task-name"],open:!1,isDeleted:!1,due:new Date(e.currentSTask.due),mode:e.mode,isEdited:!1,submittedOn:"",submissionTasks:e.submissionTasks},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){T.a.highlightAll()}},{key:"componentDidMount",value:function(){T.a.highlightAll()}},{key:"handleClick",value:function(e,t){this.setState({content:t.content,"student-id":t.netId,submittedOn:t.submittedOn})}},{key:"viewContent",value:function(){var e=this,t=this.state.content,a=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:t}));return s.a.createElement(b.a,{style:{overflow:"auto",minHeight:500,maxHeight:330,maxWidth:1e3,minWidth:200}},s.a.createElement(f.a,{onClick:function(t){return e.handleDeleteSubmission(t)},disabled:"Click on a student ID to view their submission"===this.state.content},"Delete submission"),s.a.createElement(R.a,null,"Submitted on:",new Date(this.state.submittedOn).toLocaleString()),a)}},{key:"handleDeleteSubmission",value:function(e){var t=this,a=this.state.specificSubmissions.findIndex((function(e,a,n){return e.netId===t.state["student-id"]})),n=this;fetch("/submissions/"+this.state.currentSTask["task-name"]+"/student/"+this.state["student-id"],{method:"DELETE",headers:{"Content-type":"application/json"}}).then((function(e){console.log("inside this"),n.state.specificSubmissions.splice(a,1),n.setState({specificSubmissions:n.state.specificSubmissions,content:""}),n.props.update()}))}},{key:"handleEditTask",value:function(e){var t=this,a=this.state.submissionTasks.findIndex((function(e,a,n){return e["task-name"]===t.state["task-name"]})),n=this,s={type:"submission","task-name":this.state["task-name"],due:this.state.due.toISOString()};fetch("/submissionTask/"+this.state.currentSTask["task-name"],{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(s)}).then((function(e){alert("Task has been edited"),n.state.submissionTasks.splice(a,1,s),n.setState({isEdited:!0,submissionTasks:n.state.submissionTasks}),n.props.update()}))}},{key:"handleDeleteTask",value:function(){this.setState({open:!0})}},{key:"render",value:function(){var e=this;console.log(this.state);var t=this.state.specificSubmissions.map((function(t,a,n){return s.a.createElement(N.a.Row,{key:"row".concat(t.netId)},s.a.createElement(N.a.Cell,{key:"submission".concat(t.netId),onClick:function(a){return e.handleClick(a,t)},active:e.state["student-id"]===t.netId},t.netId))}));return s.a.createElement(h.a,{stackable:!0},s.a.createElement(h.a.Column,null,s.a.createElement(h.a.Row,null,s.a.createElement(b.a,{style:{boxShadow:"none"}},s.a.createElement("span",null,s.a.createElement(p.a,{textAlign:"center",as:"h4"},s.a.createElement(j.a,{label:"Submission Task-name",size:"small",icon:"tag",name:"task-name",value:this.state["task-name"],readOnly:!0,onChange:function(t){return e.setState({"task-name":t.target.value})}}))))),s.a.createElement(h.a.Row,null,s.a.createElement(h.a.Column,null,s.a.createElement(v.a,{centered:"true"},s.a.createElement(b.a,{textAlign:"center"},s.a.createElement(v.a.Group,{centered:"true",widths:"equal"},s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement(R.a,{icon:"calendar alternate",content:"Due"}),s.a.createElement(V.a,{selected:this.state.due,onChange:function(t){return e.setState({due:t})},showTimeSelect:!0,timeFormat:"p",timeIntervals:15,dateFormat:"Pp"})),s.a.createElement(f.a,{onClick:function(t){return e.handleEditTask(t)}},"Save task details!"),s.a.createElement(f.a,{onClick:function(t){return e.handleDeleteTask(t)}}," Delete task"),s.a.createElement(K.a,{open:this.state.open,onCancel:this.handleCancel,onConfirm:this.handleConfirm})))))),s.a.createElement(h.a.Row,null,s.a.createElement(h.a,null,s.a.createElement(h.a.Row,null,s.a.createElement(h.a.Column,{width:4},s.a.createElement(N.a,null,s.a.createElement(N.a.Header,null,s.a.createElement(N.a.Row,null,s.a.createElement(N.a.HeaderCell,null,"Student Ids submitted"))),s.a.createElement(N.a.Body,null,t))),s.a.createElement(h.a.Column,{width:12},this.viewContent()))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.currentSTask===t.currentSTask?null:{currentSTask:e.currentSTask,specificSubmissions:e.specificSubmissions,content:"Click on a student ID to view their submission","task-name":e.currentSTask["task-name"],due:new Date(e.currentSTask.due)}}}]),t}(s.a.Component),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleEachChange=function(){var e=Object(g.a)(E.a.mark((function e(t,n,s){var i,r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.target,r=i.value,o=i.name,a.setState(Object(c.a)({},o,r));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.handleCancel=function(){a.setState({open:!1})},a.handleConfirm=function(){var e=a.state.reviewTasks.findIndex((function(e,t,n){return e["peer-review-for"]===a.state["peer-review-for"]})),t=Object(M.a)(a);fetch("/ReviewTask/"+a.state.currentRTask["peer-review-for"],{method:"DELETE",headers:{"Content-type":"application/json"}}).then((function(e){t.setState({open:!1}),t.props.update()})).then((function(){fetch("/reviews/"+a.state.currentRTask["peer-review-for"],{method:"DELETE",headers:{"Content-type":"application/json"}}).then((function(){fetch("/studentAssignment/"+a.state.currentRTask["peer-review-for"],{method:"DELETE",headers:{"Content-type":"application/json"}}).then((function(a){console.log("specass",t.state.specAssignments),alert("Task has been deleted"),t.state.reviewTasks.splice(e,1),t.state.specAssignments={},t.state.specificReviews=[],t.setState({isDeleted:!0,reviewTasks:t.state.reviewTasks,specAssignments:t.state.specAssignments,specificReviews:t.state.specificReviews}),t.props.viewHome()}))}))}))},a.state={specificReviews:e.specificReviews,currentRTask:e.currentRTask,content:"",specSubmissions:e.specSubmissions,reviewDetails:[],reviewRubric:[],"peer-review-for":e.currentRTask["peer-review-for"],due:new Date(e.currentRTask.due),specAssignments:e.specAssignments,teacherRubrics:e.currentRTask.rubric,open:!1,reviewTasks:e.reviewTasks,isDeleted:!1,isEdited:!1,isTaskEdited:!1,isSaved:!1,instructions:e.currentRTask.instructions},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(t["peer-review-for"]!==this.state["peer-review-for"])this.state.currentRTask.rubric.map((function(e,t,n){var s;a.setState((s={},Object(c.a)(s,"point".concat(t),e.points),Object(c.a)(s,"rubric".concat(t),e["rubric-name"]),Object(c.a)(s,"criteria".concat(t),e.criteria),s))})),this.state.specificReviews.map((function(e,t,n){e.review.rubric.map((function(t,n,s){var i;console.log("elementin update",e),a.setState((i={},Object(c.a)(i,"inputPoint".concat(t["rubric-name"]).concat(e["submitter-id"]).concat(e["reviewer-id"]),t["points-given"]),Object(c.a)(i,"inputComment".concat(t["rubric-name"]).concat(e["submitter-id"]).concat(e["reviewer-id"]),t.comments),i))}))}));T.a.highlightAll()}},{key:"componentDidMount",value:function(){var e=this;this.state.currentRTask.rubric.map((function(t,a,n){var s;e.setState((s={},Object(c.a)(s,"point".concat(a),t.points),Object(c.a)(s,"rubric".concat(a),t["rubric-name"]),Object(c.a)(s,"criteria".concat(a),t.criteria),s))})),this.state.specificReviews.map((function(t,a,n){t.review.rubric.map((function(a,n,s){var i;console.log("elementin mount",t),e.setState((i={},Object(c.a)(i,"inputPoint".concat(a["rubric-name"]).concat(t["submitter-id"]).concat(t["reviewer-id"]),a["points-given"]),Object(c.a)(i,"inputComment".concat(a["rubric-name"]).concat(t["submitter-id"]).concat(t["reviewer-id"]),a.comments),i))}))}));T.a.highlightAll()}},{key:"viewPoints",value:function(e){return this.state.specificReviews.filter((function(t,a,n){return t["submitter-id"]===e})).map((function(e,t,a){return e.review["total-points"]<10?s.a.createElement(N.a.Cell,{negative:!0,key:"review".concat(e["reviewer-id"])},e.review["total-points"]):s.a.createElement(N.a.Cell,{key:"review".concat(e["reviewer-id"])},e.review["total-points"])}))}},{key:"handleItemClick",value:function(e,t){console.log("clicked review item");var a="",n=this.state.specSubmissions.find((function(e,a,n){return e.netId===t}));"undefined"!=typeof n&&(a=n.content);var s=this.state.specificReviews.filter((function(e,a,n){return e["submitter-id"]===t}));console.log("reviewDetails",s),this.setState({content:a,reviewDetails:s,"student-id":t,viewReviews:!1,"reviewer-id":""})}},{key:"viewContents",value:function(){var e=this.state.content,t=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:e}));return s.a.createElement(b.a,{style:{overflow:"auto",minHeight:500,maxHeight:330,maxWidth:1e3,minWidth:150}},t)}},{key:"handleReviewClick",value:function(e,t){console.log("clicked",t,t.review.rubric),this.setState({reviewRubric:t.review.rubric,"reviewer-id":t["reviewer-id"],viewReviews:!0})}},{key:"addRubrics",value:function(e){this.state.teacherRubrics.push({points:"","rubric-name":"",criteria:""}),this.setState({teacherRubrics:this.state.teacherRubrics})}},{key:"handleEditReviews",value:function(e){this.setState({isEdited:!0})}},{key:"handleEditTaskDetails",value:function(e){this.setState({isTaskEdited:!0})}},{key:"handleRubricChange",value:function(e,t,a){var n=this;this.handleEachChange(e).then((function(){var e={"rubric-name":n.state["rubric".concat(a)],points:n.state["point".concat(a)],criteria:n.state["criteria".concat(a)]};n.state.teacherRubrics.splice(a,1,e),n.setState({teacherRubrics:n.state.teacherRubrics})}))}},{key:"handleEditTask",value:function(e){var t=this,a=this.state.reviewTasks.findIndex((function(e,a,n){return e["peer-review-for"]===t.state["peer-review-for"]})),n=this,s={"peer-review-for":this.state["peer-review-for"],due:this.state.due.toISOString(),rubric:this.state.teacherRubrics,instructions:this.state.instructions},i=this.state.specAssignments;fetch("/reviewTask/"+this.state.currentRTask["peer-review-for"],{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(s)}).then((function(){fetch("/studentAssignment/"+t.state.currentRTask["task-name"],{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(i)}).then((function(e){console.log("inside this"),n.props.update()}))})).then((function(e){n.state.reviewTasks.splice(a,1,s),n.setState({isTaskEdited:!1,reviewTasks:n.state.reviewTasks})}))}},{key:"handleEditOneReview",value:function(e,t,a){var n=this;this.handleEachChange(e).then((function(){var e={"rubric-name":t["rubric-name"],"possible-points":t["possible-points"],"points-given":n.state["inputPoint".concat(t["rubric-name"]).concat(n.state["student-id"]).concat(n.state["reviewer-id"])],comments:n.state["inputComment".concat(t["rubric-name"]).concat(n.state["student-id"]).concat(n.state["reviewer-id"])]};n.state.reviewRubric.splice(a,1,e),n.setState({reviewRubric:n.state.reviewRubric})}))}},{key:"handleSaveReviews",value:function(e){for(var t=this,a=0,n=0;n<this.state.reviewRubric.length;n++)a+=parseInt(this.state.reviewRubric[n]["points-given"]);var s=this.state.specificReviews.findIndex((function(e){return e["reviewer-id"]===t.state["reviewer-id"]&&e["submitter-id"]===t.state["student-id"]})),i=this,r={"assignment-name":this.state["peer-review-for"],"reviewer-id":this.state["reviewer-id"],"submitter-id":this.state["student-id"],review:{"total-points":a,"general-comments":"",rubric:this.state.reviewRubric}};fetch("/reviews/"+this.state["peer-review-for"]+"/reviewer/"+this.state["reviewer-id"]+"/submitter/"+this.state["student-id"],{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)}).then((function(e){i.state.specificReviews.splice(s,1,r),i.setState({specificReviews:i.state.specificReviews,isEdited:!1})}))}},{key:"handleDeleteTask",value:function(){this.setState({open:!0})}},{key:"displayRubrics",value:function(){var e=this;return this.state.teacherRubrics.map((function(t,a,n){var i=e.state["criteria".concat(a)],r=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:i}));return s.a.createElement("div",{key:"divvv".concat(a)},e.state.isTaskEdited?s.a.createElement(v.a.Group,{key:"group".concat(a)},s.a.createElement(R.a,{content:"Rubric"}),s.a.createElement(v.a.Input,{name:"rubric".concat(a),label:"rubric-name",placeholder:"rubric-name",width:8,disabled:e.state.specificReviews.length>0,key:"rubric".concat(a),required:!0,onChange:function(n){return e.handleRubricChange(n,t,a)},value:e.state["rubric".concat(a)]}),s.a.createElement(v.a.Input,{name:"point".concat(a),type:"number",label:"Points",placeholder:"Points",width:6,onChange:function(n){return e.handleRubricChange(n,t,a)},disabled:e.state.specificReviews.length>0||""===e.state["rubric".concat(a)],key:"point".concat(a),required:!0,value:e.state["point".concat(a)]}),s.a.createElement(v.a.TextArea,{name:"criteria".concat(a),label:"criteria",placeholder:"criteria",width:12,disabled:e.state.specificReviews.length>0||""===e.state["rubric".concat(a)],required:!0,key:"criteria".concat(a),onChange:function(n){return e.handleRubricChange(n,t,a)},value:e.state["criteria".concat(a)]}),s.a.createElement(f.a,{basic:!0,icon:!0,size:"mini",circular:!0,onClick:function(t){return e.addRubrics(t)},disabled:!e.state["point".concat(a)]||!e.state["rubric".concat(a)]||!e.state["criteria".concat(a)]},s.a.createElement(I.a,{name:"add"}))):s.a.createElement(v.a.Group,{key:"group".concat(a)},s.a.createElement(R.a,{content:"Rubric"}),s.a.createElement(v.a.Input,{key:"rubric".concat(a),label:"rubric-name",width:4,readOnly:!0,value:e.state["rubric".concat(a)]||""}),s.a.createElement(v.a.Input,{key:"point".concat(a),label:"Points",width:3,readOnly:!0,value:e.state["point".concat(a)]||""}),s.a.createElement(b.a,{style:{overflow:"auto",minHeight:100,maxHeight:100,maxWidth:250,minWidth:250},textAlign:"left"},r)))}))}},{key:"displayAssignments",value:function(){var e=this.state.specAssignments.studentsAssignment.map((function(e,t,a){return s.a.createElement(N.a.Row,{key:"row".concat(t)},s.a.createElement(N.a.Cell,{key:"cell".concat(t)},e.student),function(e){return e.reviewers.map((function(e,t,a){return s.a.createElement(N.a.Cell,{key:"cell2".concat(t)},e)}))}(e))}));return s.a.createElement(P.a,{trigger:s.a.createElement(f.a,null,"View assignments")},s.a.createElement(P.a.Header,null,"Rubrics"),s.a.createElement(P.a.Content,{scrolling:!0},s.a.createElement(P.a.Description,null,s.a.createElement(p.a,null,"Modal Header"),s.a.createElement(N.a,{celled:!0},s.a.createElement(N.a.Header,null,s.a.createElement(N.a.Row,null,s.a.createElement(N.a.HeaderCell,null,"Submitter Id"),s.a.createElement(N.a.HeaderCell,{colSpan:this.state.num},"Reviewed by"))),s.a.createElement(N.a.Body,null,e)))))}},{key:"render",value:function(){var e=this;console.log("state",this.state);var t=new Set,a=(this.state.specificReviews.map((function(e,a,n){t.add(e["submitter-id"])})),Array.from(t).map((function(t,a,n){return s.a.createElement(N.a.Row,{key:"row".concat(t)},s.a.createElement(N.a.Cell,{key:"submission".concat(t),onClick:function(a){return e.handleItemClick(a,t)},active:e.state["student-id"]===t},t),e.viewPoints(t))}))),n=this.state.reviewDetails.map((function(t,a,n){return console.log("getting printd"),s.a.createElement(x.a.Item,{name:"ReviewDisplay".concat(a),as:"a",onClick:function(a){return e.handleReviewClick(a,t)},active:t["reviewer-id"]===e.state["reviewer-id"],key:"ReviewDisplay".concat(t).concat(a)},t["reviewer-id"])})),i=this.state.instructions,r=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:i})),c=this.state.reviewRubric.map((function(t,a,n){var i=t.comments,r=s.a.createElement("div",{id:"rawHtml",className:"language-html"},s.a.createElement(S.a,{source:i}));return s.a.createElement(N.a.Row,{key:"roww".concat(a).concat(t["rubric-name"])},s.a.createElement(N.a.Cell,{key:"rubric".concat(a).concat(t["rubric-name"])},t["rubric-name"]),s.a.createElement(N.a.Cell,{key:"possiblepts".concat(a).concat(t["rubric-name"])},t["possible-points"]),s.a.createElement(N.a.Cell,{key:"pointsGiven".concat(a).concat(t["rubric-name"])},e.state.isEdited?s.a.createElement("input",{type:"number",style:{width:"4em"},name:"inputPoint".concat(t["rubric-name"]).concat(e.state["student-id"]).concat(e.state["reviewer-id"]),required:!0,onChange:function(n){return e.handleEditOneReview(n,t,a)},key:"inputPoint".concat(t["rubric-name"]).concat(e.state["student-id"]).concat(e.state["reviewer-id"]),value:t["points-given"]||e.state["inputPoint".concat(t["rubric-name"]).concat(e.state["student-id"]).concat(e.state["reviewer-id"])]}):t["points-given"]),s.a.createElement(N.a.Cell,{key:"comment".concat(a).concat(t["rubric-name"])},e.state.isEdited?s.a.createElement(j.a,{key:"inputComment".concat(t["rubric-name"]).concat(e.state["student-id"]).concat(e.state["reviewer-id"]),name:"inputComment".concat(t["rubric-name"]).concat(e.state["student-id"]).concat(e.state["reviewer-id"]),onChange:function(n){return e.handleEditOneReview(n,t,a)},required:!0,value:i||e.state["inputComment".concat(t["rubric-name"]).concat(e.state["student-id"]).concat(e.state["reviewer-id"])]}):r))}));return s.a.createElement("div",{style:{marginLeft:10,marginRight:10,minWidth:550,marginTop:50}},s.a.createElement(h.a,{stackable:!0},s.a.createElement(h.a.Column,null,s.a.createElement(h.a.Row,null,s.a.createElement(b.a,{style:{boxShadow:"none"}},s.a.createElement("span",null,s.a.createElement(p.a,{textAlign:"center",as:"h5"},this.state.isTaskEdited?s.a.createElement(j.a,{label:"peer-review-for",icon:"tag",name:"peer-review-for",value:this.state["peer-review-for"],readOnly:!0,onChange:function(t){return e.setState({"peer-review-for":t.target.value})}}):s.a.createElement(j.a,{label:"peer-review-for",value:this.state["peer-review-for"],icon:"tag",readOnly:!0}))))),s.a.createElement(h.a.Row,{textAlign:"center"},s.a.createElement(b.a,{textAlign:"center"},s.a.createElement(v.a,{centered:"true"},s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement(R.a,{icon:"calendar alternate",content:"Due"}),this.state.isTaskEdited?s.a.createElement(V.a,{selected:this.state.due,onChange:function(t){return e.setState({due:t})},showTimeSelect:!0,timeFormat:"p",timeIntervals:15,dateFormat:"Pp"}):new Date(this.state.due).toLocaleString()),s.a.createElement(v.a.Field,{inline:!0,required:!0},s.a.createElement(R.a,null,"General Instructions"),this.state.isTaskEdited?s.a.createElement(O.a,{style:{minHeight:100,minWidth:200,maxHeight:100,maxWidth:300},name:"instructions",required:!0,value:this.state.instructions,onChange:function(t){e.handleEachChange(t)}}):s.a.createElement(b.a,{style:{overflow:"auto",marginLeft:"20em",minHeight:330,maxHeight:330,maxWidth:600,minWidth:200},textAlign:"left"},r)),s.a.createElement(h.a,{textAlign:"center"},s.a.createElement(h.a.Column,{width:10},this.displayRubrics())),s.a.createElement(f.a,{onClick:function(t){return e.handleEditTaskDetails(t)},disabled:this.state.isTaskEdited},"Edit this task"),s.a.createElement(f.a,{onClick:function(t){return e.handleEditTask(t)},disabled:!this.state.isTaskEdited},"Save task details!"),s.a.createElement(f.a,{onClick:function(t){return e.handleDeleteTask(t)}}," Delete task"),this.displayAssignments(),s.a.createElement(K.a,{open:this.state.open,onCancel:this.handleCancel,onConfirm:this.handleConfirm})))),s.a.createElement(h.a.Row,null,s.a.createElement(h.a,null,s.a.createElement(h.a.Row,null,s.a.createElement(h.a.Column,{width:4},s.a.createElement(N.a,null,s.a.createElement(N.a.Header,null,s.a.createElement(N.a.Row,null,s.a.createElement(N.a.HeaderCell,null,"Student Ids submitted"),s.a.createElement(N.a.HeaderCell,{colSpan:3},"Review total points"))),s.a.createElement(N.a.Body,null,a))),s.a.createElement(h.a.Column,{width:7},this.viewContents()),s.a.createElement(h.a.Column,{width:4},s.a.createElement(b.a,{style:{overflow:"auto",minHeight:300,maxHeight:400,maxWidth:2e3,minWidth:300}},s.a.createElement(x.a,{pointing:!0,secondary:!0},n),!0===this.state.viewReviews?s.a.createElement(N.a,null,s.a.createElement(N.a.Header,null,s.a.createElement(N.a.Row,null,s.a.createElement(N.a.HeaderCell,null,"Rubric name"),s.a.createElement(N.a.HeaderCell,null,"Possible pts"),s.a.createElement(N.a.HeaderCell,null,"Points given"),s.a.createElement(N.a.HeaderCell,null,"Comments"))),s.a.createElement(N.a.Body,null,c,s.a.createElement(f.a,{onClick:function(t){return e.handleEditReviews(t)},disabled:this.state.isEdited},"Edit this review"),s.a.createElement(f.a,{onClick:function(t){return e.handleSaveReviews(t)},disabled:!this.state.isEdited},"Save this review"))):s.a.createElement("div",null,"Click on a Reviewer id")))))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.currentRTask===t.currentRTask?null:{specificReviews:e.specificReviews,currentRTask:e.currentRTask,specSubmissions:e.specSubmissions,"peer-review-for":e.currentRTask["peer-review-for"],due:new Date(e.currentRTask.due),specAssignments:e.specAssignments,teacherRubrics:e.currentRTask.rubric,reviewTasks:e.reviewTasks,instructions:e.currentRTask.instructions}}}]),t}(s.a.Component),X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={submissionTasks:[],reviewTasks:[],mode:"",submissions:[],reviews:[],specificSubmissions:[],currentSubmissionTask:"",specificReviews:[],currentReviewTask:"",studentAssignment:[],specAssignments:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){if(console.log("teacher view updated"),console.log("prevState",t.submissionTasks===this.state.submissionTasks),t.specificSubmissions!==this.state.specificSubmissions){var a=this;fetch("/submissions/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){a.setState({submissions:e.submissions})}))}else if(t.specificReviews!==this.state.specificReviews){var n=this;fetch("/reviews/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){n.setState({reviews:e.reviews})}))}else if(t.currentSubmissionTask!==this.state.currentSubmissionTask){var s=this;fetch("/submissionTask",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){s.setState({submissionTasks:e.submissionTasks})}))}T.a.highlightAll()}},{key:"componentDidMount",value:function(){var e=this;fetch("/submissionTask",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got"+t),e.setState({submissionTasks:t.submissionTasks})})),fetch("/submissions/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got in task submit"+t.submissions),e.setState({submissions:t.submissions})})),fetch("/reviewTask",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got"+t),e.setState({reviewTasks:t.reviewTasks})})),fetch("/reviews/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got in task submit"+t.reviews),e.setState({reviews:t.reviews})})),fetch("/studentAssignment/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("this is what we got in stu ass"+t.studentAssignment),e.setState({studentAssignment:t.studentAssignment})})),T.a.highlightAll()}},{key:"updateArray",value:function(){this.setState({submissionTasks:this.state.submissionTasks})}},{key:"handleViewComponent",value:function(){var e=this;if("createTask"===this.state.mode)return s.a.createElement(B,{submissionTasks:this.state.submissionTasks,reviewTasks:this.state.reviewTasks,update:this.updateArray.bind(this),submissions:this.state.submissions,mode:this.state.mode});if("viewSubmissionSummary"===this.state.mode)return s.a.createElement(Y,{specificSubmissions:this.state.specificSubmissions,currentSTask:this.state.currentSubmissionTask,update:this.updateArray.bind(this),mode:this.state.mode,submissionTasks:this.state.submissionTasks,viewHome:function(){return e.handleHomeClick()}});if("viewReviewSummary"===this.state.mode)return s.a.createElement(Q,{specificReviews:this.state.specificReviews,currentRTask:this.state.currentReviewTask,specSubmissions:this.state.specSubmissions,specAssignments:this.state.specAssignments,update:this.updateArray.bind(this),mode:this.state.mode,reviewTasks:this.state.reviewTasks,viewHome:function(){return e.handleHomeClick()}});var t=this.state.submissionTasks.map((function(t,a,n){return s.a.createElement(x.a.Item,{onClick:function(a){return e.handleSubmissionTaskClick(a,t)},key:"sstasks".concat(a),active:t===e.state.currentSubmissionTask},t["task-name"])})),a=this.state.reviewTasks.map((function(t,a,n){return s.a.createElement(x.a.Item,{onClick:function(a){return e.handleReviewTaskClick(a,t)},key:"rrtasks".concat(a),active:t===e.state.currentReviewTask},t["peer-review-for"])}));return s.a.createElement("div",null,s.a.createElement(b.a,{placeholder:!0,style:{overflow:"auto",minHeight:230,maxHeight:330,maxWidth:1e3,minWidth:200}},s.a.createElement(p.a,{icon:!0},s.a.createElement(I.a,{name:"tag"}),"You have the created the following assignments to submit. Click on each to view progress."),s.a.createElement(x.a,null,t)),s.a.createElement(b.a,{placeholder:!0,style:{overflow:"auto",minHeight:230,maxHeight:330,maxWidth:1e3,minWidth:200}},s.a.createElement(p.a,{icon:!0},s.a.createElement(I.a,{name:"tag"}),"You have created the following review tasks to submit. Click on each to view progress."),s.a.createElement(x.a,null,a)))}},{key:"handleSubmissionTaskClick",value:function(e,t){var a=this.state.submissions.filter((function(e,a,n){return e["assignment-name"]===t["task-name"]}));console.log("specsss sub",a),this.setState({mode:"viewSubmissionSummary",currentSubmissionTask:t,specificSubmissions:a})}},{key:"handleCreateTaskClick",value:function(e){this.setState({mode:"createTask"})}},{key:"handleReviewTaskClick",value:function(e,t){var a=this.state.reviews.filter((function(e,a,n){return e["assignment-name"]===t["peer-review-for"]})),n=this.state.submissions.filter((function(e,a,n){return e["assignment-name"]===t["peer-review-for"]})),s=this.state.studentAssignment.find((function(e,a,n){return e["peer-review-for"]===t["peer-review-for"]}));this.setState({mode:"viewReviewSummary",currentReviewTask:t,specificReviews:a,specSubmissions:n,specAssignments:s})}},{key:"handleHomeClick",value:function(){this.setState({mode:"",currentSubmissionTask:"",createdReviewTask:"",specificSubmissions:[],specificReviews:[]})}},{key:"render",value:function(){var e=this,t=this.state.submissionTasks.map((function(t,a,n){return s.a.createElement(L.a.Item,{onClick:function(a){return e.handleSubmissionTaskClick(a,t)},key:"stasks".concat(a),active:t===e.state.currentSubmissionTask},t["task-name"])})),a=this.state.reviewTasks.map((function(t,a,n){return s.a.createElement(L.a.Item,{onClick:function(a){return e.handleReviewTaskClick(a,t)},key:"rtasks".concat(a),active:t===e.state.currentReviewTask},t["peer-review-for"])}));return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(x.a,{fixed:"top",fluid:!0,stackable:!0,inverted:!0},s.a.createElement(x.a.Item,{as:"h4",header:!0,position:"right",onClick:function(){return e.handleHomeClick()}},"Peer Review System"),s.a.createElement(x.a.Item,{as:"a",position:"right"},"Welcome, ".concat(this.props.netId)),s.a.createElement(x.a.Item,{as:"a",position:"right","margin-right":"150px",onClick:this.props.onlogoutClick},"Logout"))),s.a.createElement("div",{style:{marginLeft:10,marginRight:10,minWidth:550,marginTop:50}},s.a.createElement(h.a,{stackable:!0},s.a.createElement(h.a.Column,null,s.a.createElement(h.a.Row,null,s.a.createElement(x.a,{fluid:!0,stackable:!0},s.a.createElement(L.a,{item:!0,text:"Submission tasks"},s.a.createElement(L.a.Menu,null,t)),s.a.createElement(L.a,{item:!0,text:"Review tasks"},s.a.createElement(L.a.Menu,null,a)),s.a.createElement(x.a.Item,{as:"a",position:"right",onClick:function(t){return e.handleCreateTaskClick(t)},active:"createTask"===this.state.mode},"Create task"))),s.a.createElement(h.a.Row,null,this.handleViewComponent())))))}}]),t}(s.a.Component),Z=a(269),$=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(u.a)(this,Object(m.a)(t).call(this,e));var n=new Z.a,s=n.get("user");return console.log("cookies",n.get("user")),"undefined"!==typeof n.get("user")?a.state={netId:s.netId,role:s.role,firstName:s.firstName,lastName:s.lastName}:a.state={netId:"",password:"",role:"",message:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(c.a)({},n,a))}},{key:"login",value:function(){var e=this,t={netId:this.state.netId,password:this.state.password};fetch("/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){console.log(t),t.netId&&t.netId===e.state.netId?"instructor"===t.role?e.setState({role:t.role,firstName:t.firstName,lastName:t.lastName}):"student"===t.role?e.setState({role:t.role,firstName:t.firstName,lastName:t.lastName}):e.setState({role:"none"}):e.setState({netId:"",password:"",message:t.message,firstName:"",lastName:""})}))}},{key:"logout",value:function(){console.log("clicked logout in app");var e=this;fetch("/logout",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){console.log("logged out"),e.setState({netId:"",password:"",role:"",message:""})}))}},{key:"render",value:function(){var e=this;return console.log("state,",this.state),""===this.state.role?s.a.createElement(h.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},s.a.createElement(h.a.Column,{style:{maxWidth:450}},s.a.createElement(p.a,{as:"h2",color:"blue",textAlign:"center"},"Log-in to your account"),s.a.createElement(v.a,{size:"large"},s.a.createElement(b.a,{stacked:!0},s.a.createElement(v.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Net ID",name:"netId",value:this.state.netId,onChange:function(t){return e.handleChange(t)}}),s.a.createElement(v.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),s.a.createElement(f.a,{type:"button",color:"blue",onClick:function(){return e.login()},fluid:!0,size:"large"},"Login"))),s.a.createElement(w.a,null,s.a.createElement(p.a,{as:"h4",color:"red"},this.state.message),"Having trouble ? Contact the Instructor"))):"instructor"===this.state.role?s.a.createElement(X,{netId:this.state.netId,role:this.state.role,onlogoutClick:function(){return e.logout()}}):"student"===this.state.role?s.a.createElement(q,{netId:this.state.netId,role:this.state.role,onlogoutClick:function(){return e.logout()},firstName:this.state.firstName,lastName:this.state.lastName}):"none"===this.state.role?s.a.createElement("div",null,"not authorized"):void 0}}]),t}(s.a.Component);r.a.render(s.a.createElement($,null),document.getElementById("root"))}},[[279,1,2]]]);
//# sourceMappingURL=main.fb654af9.chunk.js.map